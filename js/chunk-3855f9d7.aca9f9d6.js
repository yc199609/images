(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3855f9d7"],{2329:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("Search",{attrs:{"show-btn":e.buttonPermissions("200010201")},on:{search:e.searchInit,changeKeyword:e.changeKeyword}},[a("div",{attrs:{slot:"input"},slot:"input"},[a("el-col",{attrs:{span:7,"v-if":e.buttonPermissions("3000201")}},[a("el-form-item",{attrs:{label:"设备"}},[a("el-button-group",[a("el-button",{class:e.deviceOption?"":"border",staticStyle:{height:"36px","min-width":"180px"},on:{click:function(t){return e.deviceSearch("device")}}},[e._v("\n                            "+e._s(e.deviceOption&&e.deviceOption.name?e.deviceOption.name:"请选择设备")+"\n                        ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.deviceOption,expression:"deviceOption"}],attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.clearDeviceOption("device")}}})],1)],1)],1)],1),e.buttonPermissions("200010202")?a("el-button",{attrs:{type:"warning",plain:"",size:"small",icon:"el-icon-plus"},on:{click:e.insert}},[e._v(e._s(e.$t("dataView.create")))]):e._e()],1),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{data:e.tableData,border:""}},[a("template",{slot:"empty"},[a("div",{staticClass:"empty"},[a("img",{attrs:{src:i("a431")}}),a("p",[e._v("暂无数据")])])]),a("el-table-column",{attrs:{label:e.$t("dataView.form.name"),align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:e.$t("dataView.form.type"),align:"center",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[10===t.row.type?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("dataView.form.typeOf.statusDisplay")))]):100===t.row.type?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.$t("dataView.form.typeOf.curveDisplay")))]):200===t.row.type?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("dataView.detail.typeOf.listDisplay")))]):e._e()]}}])}),a("el-table-column",{attrs:{label:e.$t("dataView.form.remark"),align:"center",prop:"remark"}}),e.buttonPermissions("200010203")||e.buttonPermissions("200010204")?a("el-table-column",{attrs:{label:e.$t("dataView.form.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{staticClass:"ycbutton",attrs:{span:8,offset:2}},[e.buttonPermissions("200010203")?a("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(i){return e.edit(t.row.id)}}},[e._v(e._s(e.$t("dataView.form.edit")))]):e._e()],1),a("el-col",{staticClass:"ycbutton",attrs:{span:8,offset:2}},[e.buttonPermissions("200010204")?a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.del(t.row.id)}}},[e._v(e._s(e.$t("dataView.form.delete")))]):e._e()],1)],1)]}}],null,!1,512901579)}):e._e()],2)],1),a("div",{staticClass:"paginationContainer"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[5,20,30,40,50],"page-size":e.pageSize,total:e.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.detailView?a("detail",{ref:"detail",on:{submit:e.init,detailClose:e.detailClose}}):e._e(),e.insertView?a("insert",{ref:"insert",on:{submit:e.init,insertClose:e.insertClose}}):e._e(),e.deviceView?a("DeviceSearch",{ref:"deviceSearch",on:{submit:e.changeDeviceOption}}):e._e()],1)},n=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),r=i("dddd"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,"close-on-click-modal":!1,title:e.$t("dataView.insert.create")},on:{"update:visible":function(t){e.visible=t},close:e.onClose}},[e.visible?i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:e.$t("dataView.insert.typeDevice"),name:"first"}},[i("device",{ref:"deviceType",attrs:{mode:"deviceType"},on:{submit:e.deviceType}})],1),e.step>=1?i("el-tab-pane",{attrs:{label:e.$t("dataView.insert.deviceManagement"),name:"second"}},[i("device",{attrs:{mode:"device"},on:{submit:e.device}})],1):e._e(),e.step>=2?i("el-tab-pane",{attrs:{label:e.$t("dataView.insert.template"),name:"third"}},[i("JsonEditor",{model:{value:e.json,callback:function(t){e.json=t},expression:"json"}}),i("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.Next}},[e._v(e._s(e.$t("dataView.insert.next")))])],1)],1):e._e(),e.step>=3?i("el-tab-pane",{attrs:{label:e.$t("dataView.insert.ok"),name:"forth"}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("dataView.insert.displayName"),prop:"name"}},[i("el-input",{attrs:{placeholder:e.$t("dataView.insert.displayName")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("dataView.insert.type"),prop:"type"}},[i("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-option",{attrs:{value:10,label:e.$t("dataView.insert.statusDisplay")}}),i("el-option",{attrs:{value:100,label:e.$t("dataView.insert.curveDisplay")}}),i("el-option",{attrs:{value:200,label:e.$t("dataView.detail.typeOf.listDisplay")}})],1)],1)],1)],1),i("el-form-item",{attrs:{label:e.$t("dataView.insert.remark"),prop:"remark"}},[i("el-input",{attrs:{maxlength:150,type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("dataView.insert.submit")))])],1)],1):e._e()],1):e._e()],1)},l=[],c=i("6bf2"),d=i("af07"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("template",{slot:"empty"},[a("div",{staticClass:"empty"},[a("img",{attrs:{src:i("a431")}}),a("p",[e._v("暂无数据")])])]),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"device"===e.mode?this.$t("dataView.device.deviceName"):this.$t("dataView.device.typeName"),prop:"name"}}),a("el-table-column",{attrs:{label:"device"===e.mode?this.$t("dataView.device.deviceCode"):this.$t("dataView.device.typeCode"),prop:"code"}}),a("el-table-column",{attrs:{label:e.$t("dataView.device.remark"),prop:"remark"}})],2),e.edit?e._e():a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("dataView.device.next")))])],1)],1)},u=[],m=i("11e6"),b={props:["defaultChecked","edit","mode"],data:function(){return{tableData:[],data:[]}},mounted:function(){this.init()},methods:{init:function(){var e=this;switch(this.mode){case"device":Object(m["o"])({pageIndex:1,pageSize:9e8}).then((function(t){e.resetData(t)}));break;case"deviceType":Object(m["q"])({pageIndex:1,pageSize:9e8}).then((function(t){e.resetData(t)}));break}},resetData:function(e){var t=this;this.$set(this,"tableData",e.data.items),this.pageIndex=e.data.pageIndex,this.pageSize=e.data.pageSize,this.totalCount=e.data.totalCount,this.$nextTick((function(){t.defaultChecked&&t.defaultChecked.forEach((function(e){t.tableData.forEach((function(i){e.id===i.id&&t.$refs.multipleTable.toggleRowSelection(i)}))}))}))},submit:function(){this.$emit("submit",this.data)},handleSelectionChange:function(e){this.$set(this,"data",e),this.edit&&this.$emit("submit",this.data)}}},f=b,v=i("2877"),h=Object(v["a"])(f,p,u,!1,null,null,null),y=h.exports,g={data:function(){return{rules:{name:[{required:!0,message:this.$t("dataView.rules.pleaseEnterName"),trigger:"blur"}],remark:[{required:!0,message:this.$t("dataView.rules.pleaseEnterNotes"),trigger:"blur"}],type:[{required:!0,message:this.$t("dataView.rules.pleaseSelectTheType"),trigger:"change"}]}}}};function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(i,!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var $={components:{device:y,JsonEditor:d["a"]},mixins:[g],data:function(){return{activeName:"first",visible:!1,deviceTypes:[],devices:[],step:0,json:"",form:{name:"",remark:"",type:""}}},methods:{init:function(){this.visible=!0},onClose:function(){this.$emit("insertClose")},deviceType:function(e){this.step++,this.activeName="second",this.$set(this,"deviceTypes",e)},device:function(e){this.step++,this.activeName="third",this.$set(this,"devices",e)},Next:function(){this.json.length>0?(this.step++,this.activeName="forth"):this.$message({type:"error",message:this.$t("dataView.insert.pleaseEnterTemplateData")})},submit:function(){var e=this;this.$refs.form.validate((function(t){if(t){var i=O({},e.form,{deviceTypes:e.deviceTypes,devices:e.devices,template:JSON.parse(JSON.stringify(JSON.parse(e.json)))});Object(c["a"])(i).then((function(){e.$message({type:"success",message:e.$t("dataView.insert.createSuccess"),duration:500,onClose:function(){e.visible=!1,e.$emit("submit")}})}))}}))}}},j=$,k=Object(v["a"])(j,o,l,!1,null,null,null),V=k.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,"close-on-click-modal":!1,title:e.$t("dataView.detail.modify")},on:{"update:visible":function(t){e.visible=t},close:e.onClose}},[i("div",[e.tabView?i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:e.$t("dataView.detail.typeDevice"),name:"first"}},["first"===e.activeName?i("device",{ref:"deviceType",attrs:{mode:"deviceType",edit:!0,"default-checked":e.obj.deviceTypes},on:{submit:e.deviceType}}):e._e()],1),i("el-tab-pane",{attrs:{label:e.$t("dataView.detail.deviceManagement"),name:"second"}},["second"===e.activeName?i("device",{attrs:{mode:"device",edit:!0,"default-checked":e.obj.devices},on:{submit:e.device}}):e._e()],1),i("el-tab-pane",{attrs:{label:e.$t("dataView.detail.template"),name:"third"}},["third"===e.activeName?i("Json-editor",{ref:"jsonEditor",model:{value:e.obj.template,callback:function(t){e.$set(e.obj,"template",t)},expression:"obj.template"}}):e._e()],1),i("el-tab-pane",{attrs:{label:e.$t("dataView.detail.templateInformation"),name:"fourth"}},["fourth"===e.activeName?i("el-form",{ref:"form",attrs:{model:e.obj,rules:e.rules}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("dataView.detail.displayName"),prop:"name"}},[i("el-input",{attrs:{placeholder:e.$t("dataView.detail.displayName")},model:{value:e.obj.name,callback:function(t){e.$set(e.obj,"name",t)},expression:"obj.name"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("dataView.detail.type"),prop:"type"}},[i("el-select",{model:{value:e.obj.type,callback:function(t){e.$set(e.obj,"type",t)},expression:"obj.type"}},[i("el-option",{attrs:{value:10,label:e.$t("dataView.detail.typeOf.statusDisplay")}}),i("el-option",{attrs:{value:100,label:e.$t("dataView.detail.typeOf.curveDisplay")}}),i("el-option",{attrs:{value:200,label:e.$t("dataView.detail.typeOf.listDisplay")}})],1)],1)],1)],1),i("el-form-item",{attrs:{label:e.$t("dataView.detail.remark"),prop:"remark"}},[i("el-input",{attrs:{maxlength:150,type:"textarea"},model:{value:e.obj.remark,callback:function(t){e.$set(e.obj,"remark",t)},expression:"obj.remark"}})],1)],1):e._e()],1)],1):e._e()],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("cancel")))]),i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("ok")))])],1)])},x=[];function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(i,!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var C={components:{JsonEditor:d["a"],device:y},mixins:[g],data:function(){return{tabView:!1,activeName:"first",visible:!1,obj:{deviceTypes:[],template:"",devices:[]}}},methods:{init:function(e){var t=this;this.visible=!0,Object(c["e"])(e).then((function(e){t.$set(t,"obj",e.data),t.tabView=!0}))},onClose:function(){this.tabView=!1,this.$emit("detailClose")},deviceType:function(e){this.$set(this.obj,"deviceTypes",e)},device:function(e){this.$set(this.obj,"devices",e)},submit:function(){var e,t=this;e=this.obj.template instanceof Object?this.obj.template:JSON.parse(JSON.stringify(JSON.parse(this.obj.template))),Object(c["c"])(D({},this.obj,{template:e})).then((function(){t.$message({type:"success",message:t.$t("success"),duration:500,onClose:function(){t.visible=!1}})}))}}},N=C,P=Object(v["a"])(N,_,x,!1,null,null,null),T=P.exports,E=i("1427"),I=i("4624");function z(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function J(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?z(i,!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):z(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var q={name:"DataView",components:{Search:E["a"],detail:T,insert:V,DeviceSearch:r["a"]},mixins:[I["d"],I["b"],I["c"],I["a"]],data:function(){return{loading:!1,detailView:!1,insertView:!1,tableData:[]}},mounted:function(){this.init()},methods:{searchInit:function(){this.pageIndex=1,this.init()},insertClose:function(){this.insertView=!1,this.init()},detailClose:function(){this.detailView=!1,this.init()},edit:function(e){var t=this;this.detailView=!0,this.$nextTick((function(){t.$refs.detail.init(e)}))},del:function(e){var t=this;Object(c["d"])(e).then((function(){t.$message({type:"success",message:"删除成功",duration:500,onClose:function(){t.searchInit()}})}))},insert:function(){var e=this;this.insertView=!0,this.$nextTick((function(){e.$refs.insert.init()}))},init:function(){var e=this;this.loading=!0;var t=J({},this.keyword&&{keyword:this.keyword},{pageIndex:this.pageIndex,pageSize:this.pageSize},this.deviceTypeOption&&this.deviceTypeOption.id&&{deviceTypeId:this.deviceTypeOption.id},{},this.deviceOption&&this.deviceOption.id&&{deviceId:this.deviceOption.id});Object(c["f"])(t).then((function(t){e.loading=!1,e.$set(e,"tableData",t.data.items),e.pageIndex=t.data.pageIndex,e.pageSize=t.data.pageSize,e.totalCount=t.data.totalCount}))}}},K=q,M=(i("5e52"),i("3386"),Object(v["a"])(K,a,n,!1,null,"19cfa4dc",null));t["default"]=M.exports},3386:function(e,t,i){"use strict";var a=i("5fb6"),n=i.n(a);n.a},"5e52":function(e,t,i){"use strict";var a=i("e268"),n=i.n(a);n.a},"5fb6":function(e,t,i){},e268:function(e,t,i){}}]);
//# sourceMappingURL=chunk-3855f9d7.aca9f9d6.js.map