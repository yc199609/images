(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7426fc89"],{"0b9f":function(e,t,i){"use strict";var a=i("708e"),n=i.n(a);n.a},"12a9":function(e,t,i){},"1dfe":function(e,t,i){},"221e":function(e,t,i){},"2e24":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.childvisible,"append-to-body":!0,"close-on-click-modal":!1,"modal-append-to-body":!1,title:e.$t("list.child.devices")},on:{"update:visible":function(t){e.childvisible=t},close:e.onchildClose}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""},on:{select:e.handleChoose,"select-all":e.handleChooseAll}},[a("template",{slot:"empty"},[a("div",{staticClass:"empty"},[a("img",{attrs:{src:i("a431")}}),a("p",[e._v("暂无数据")])])]),a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{label:e.$t("list.child.code"),align:"center",prop:"code"}}),a("el-table-column",{attrs:{label:e.$t("list.child.name"),align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:e.$t("list.child.type"),align:"center",prop:"typeName"}})],2),a("div",{staticClass:"paginationContainer"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,30,40,50,100],"page-size":e.pageSize,total:e.totalCount,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.childvisible=!1}}},[e._v(e._s(e.$t("cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.chooseChild}},[e._v(e._s(e.$t("ok")))])],1)],1)},n=[],o=(i("7f7f"),i("ac6a"),i("20d6"),i("6762"),i("2fdb"),i("11e6")),s={name:"Child",props:["checkedData"],data:function(){return{childvisible:!1,tableData:[],pageIndex:1,pageSize:10,totalCount:30,chooseArray:[]}},created:function(){var e=(this.checkedData||[]).map((function(e){return{id:e.deviceId,name:e.deviceName,code:e.deviceCode,relCode:e.code}}));this.chooseArray=e},methods:{handleChooseAll:function(e){var t=this,i=this.chooseArray.map((function(e){return e.id}));if(e.length>0){var a=e.filter((function(e){return!i.includes(e.id)}));this.chooseArray=this.chooseArray.concat(a)}else this.chooseArray=this.chooseArray.filter((function(e){return!t.tableData.map((function(e){return e.id})).includes(e.id)}))},handleChoose:function(e,t){var i=e.some((function(e){return e.id===t.id}));if(i){var a=this.chooseArray.some((function(e){return e.id===t.id}));a||this.chooseArray.push(t)}else{var n=this.chooseArray.findIndex((function(e){return e.id===t.id}));this.chooseArray.splice(n,1)}},onchildClose:function(){this.$emit("hidden")},handleCurrentChange:function(e){this.pageIndex=e,this.init()},toggleSelection:function(e){var t=this,i=this.tableData.filter((function(t){return e.map((function(e){return e.id})).includes(t.id)}));i.forEach((function(e){t.$nextTick((function(){t.$refs.multipleTable.toggleRowSelection(e,!0)}))}))},init:function(){var e=this;this.childvisible=!0,Object(o["o"])({pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(t){e.$set(e,"tableData",t.data.items),e.totalCount=t.data.totalCount,e.pageIndex=t.data.pageIndex,e.pageSize=t.data.pageSize,e.toggleSelection(e.chooseArray)}))},chooseChild:function(){var e=this.chooseArray.map((function(e){return{deviceId:e.id,deviceName:e.name,deviceCode:e.code,code:e.relCode}}));this.$emit("childDe",e),this.childvisible=!1}}},r=s,l=(i("a645"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,"58a6447c",null);t["a"]=c.exports},5119:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:"绑定视图"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.onClose}},["Device"==e.type?a("strong",[e._v("设备: "+e._s(e.deviceCode))]):"Type"==e.type?a("strong",[e._v("设备类型: "+e._s(e.deviceCode))]):e._e(),a("el-table",{ref:"multipleTable",staticStyle:{"margin-top":"10px"},attrs:{data:e.tableData,height:"500",border:""},on:{select:e.handleChoose,"select-all":e.handleChooseAll}},[a("template",{slot:"empty"},[a("div",{staticClass:"empty"},[a("img",{attrs:{src:i("a431")}}),a("p",[e._v("暂无数据")])])]),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"viewName",label:"视图名称",align:"center"}}),a("el-table-column",{attrs:{prop:"viewTypeName",label:"视图名称类型",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"180"}})],2),a("div",{staticClass:"paginationContainer"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[5,20,30,40,50],"page-size":e.pageSize,total:e.totalCount,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.chooseView}},[e._v(e._s(e.$t("ok")))])],1)],1)},n=[],o=(i("ac6a"),i("20d6"),i("6762"),i("2fdb"),i("11e6")),s={name:"Emply",data:function(){return{dialogVisible:!1,tableData:[],pageIndex:1,pageSize:10,totalCount:30,chooseArray:[],deviceCode:"",id:"",type:"Device"}},methods:{handleChooseAll:function(e){var t=this,i=this.chooseArray.map((function(e){return e.viewId}));if(e.length>0){var a=e.filter((function(e){return!i.includes(e.viewId)}));this.chooseArray=this.chooseArray.concat(a)}else this.chooseArray=this.chooseArray.filter((function(e){return!t.tableData.map((function(e){return e.viewId})).includes(e.viewId)}))},handleChoose:function(e,t){var i=e.some((function(e){return e.viewId===t.viewId}));if(i){var a=this.chooseArray.some((function(e){return e.viewId===t.viewId}));a||this.chooseArray.push(t)}else{var n=this.chooseArray.findIndex((function(e){return e.viewId===t.viewId}));this.chooseArray.splice(n,1)}},onClose:function(){this.$emit("hidden")},handleCurrentChange:function(e){this.pageIndex=e,this.getData()},toggleSelection:function(e){var t=this,i=this.tableData.filter((function(t){return e.map((function(e){return e.viewId})).includes(t.viewId)}));i.forEach((function(e){t.$nextTick((function(){t.$refs.multipleTable.toggleRowSelection(e,!0)}))}))},init:function(e){var t=this;e&&(e.hasOwnProperty("typeName")||(this.type="Type"),this.deviceCode=e.code,this.id=e.id),this.dialogVisible=!0;var i,a=[];"Device"==this.type?i=o["g"]:"Type"==this.type&&(i=o["h"]),i({deviceId:this.id}).then((function(e){a=e.data;var i=a.map((function(e){for(var i=0;i<t.tableData.length;i++)if(t.tableData[i].viewId===e.viewId){e=t.tableData[i];break}return e}));t.chooseArray=i,t.getData()}))},getData:function(){var e=this;Object(o["f"])({pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(t){e.$set(e,"tableData",t.data.items),e.totalCount=t.data.totalCount,e.pageIndex=t.data.pageIndex,e.pageSize=t.data.pageSize,e.toggleSelection(e.chooseArray)}))},chooseView:function(){var e=this,t=[];this.chooseArray.map((function(e){t.push(e.viewId)})),"Device"==this.type?Object(o["a"])({deviceId:this.id,viewIds:t}).then((function(){e.dialogVisible=!1,e.chooseArray=[],e.$message({type:"success",message:"绑定成功"})})):"Type"==this.type&&Object(o["b"])({deviceTypeId:this.id,viewIds:t}).then((function(){e.dialogVisible=!1,e.chooseArray=[],e.$message({type:"success",message:"绑定成功"})}))}}},r=s,l=(i("ce91"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,"527b20d6",null);t["a"]=c.exports},"579c":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form-item",{attrs:{label:this.$t("list.details.baseInfomation.position"),prop:"valuePosition"}},[i("el-dropdown",{staticStyle:{width:"79%"},attrs:{"hide-on-click":!1,placement:"top",trigger:"click"}},[i("el-input",{staticClass:"el-dropdown-link",attrs:{id:"tipinput","suffix-icon":"el-icon-location"},on:{focus:e.getAddress},model:{value:e.valuePosition,callback:function(t){e.valuePosition=t},expression:"valuePosition"}}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{staticClass:"dropdown",attrs:{command:"a"}},[i("div",{attrs:{id:"leftBox"}}),i("div",{ref:"container",staticClass:"container"})])],1)],1)],1)},n=[],o=(i("7f7f"),i("386d"),{name:"Position",props:["formAddress"],data:function(){return{valuePosition:"",marker:null,map:null,lng:"",lat:"",mapClickFn:!1,address:null}},methods:{getAddress:function(){this.initMap(),this.mapTip(),this.mapClick()},mapClick:function(){var e=this;this.mapClickFn||(this.mapClickFn=!0,this.map.on("click",(function(t){e.lng=t.lnglat.lng,e.lat=t.lnglat.lat,e.positionMthods([e.lng,e.lat]),e.marker&&e.map.remove(e.marker),e.marker=new AMap.Marker({position:new AMap.LngLat(e.lng,e.lat)}),e.map.add(e.marker)})))},initMap:function(){this.map||(this.map=new AMap.Map(this.$refs.container,{resizeEnable:!0,zoom:12,center:[116.397428,39.90923]}))},mapTip:function(){var e=this,t={city:"",input:"tipinput",output:"leftBox"};this.map.plugin(["AMap.Autocomplete","AMap.PlaceSearch"],(function(){var i=new AMap.Autocomplete(t),a=new AMap.PlaceSearch({map:e.map});function n(e){a.setCity(e.poi.adcode),a.search(e.poi.name)}AMap.event.addListener(i,"select",n),e.mapClick(),AMap.event.addListener(a,"markerClick",(function(t){e.valuePosition=t.data.name}))}))},positionMthods:function(e){var t=this;"string"==typeof e?this.valuePosition=e:AMap.plugin("AMap.Geocoder",(function(){var i=new AMap.Geocoder({city:"全国"});i.getAddress(e,(function(e,i){if("complete"===e&&"OK"===i.info){var a={province:i.regeocode.addressComponent.province,city:i.regeocode.addressComponent.city};t.$set(t,"address",a),t.valuePosition=i.regeocode.formattedAddress}}))}))}}}),s=o,r=(i("ad16"),i("2877")),l=Object(r["a"])(s,a,n,!1,null,"630ed954",null);t["a"]=l.exports},5922:function(e,t,i){"use strict";var a=i("f97a"),n=i.n(a);n.a},"5e63":function(e,t,i){},6083:function(e,t,i){},"65da":function(e,t,i){"use strict";i.d(t,"f",(function(){return o})),i.d(t,"l",(function(){return s})),i.d(t,"m",(function(){return r})),i.d(t,"c",(function(){return l})),i.d(t,"h",(function(){return c})),i.d(t,"i",(function(){return d})),i.d(t,"a",(function(){return p})),i.d(t,"j",(function(){return u})),i.d(t,"d",(function(){return m})),i.d(t,"g",(function(){return f})),i.d(t,"b",(function(){return h})),i.d(t,"k",(function(){return y})),i.d(t,"e",(function(){return g}));var a=i("b775"),n={getList:"/api/dms/faultScheme/get",createItem:"/api/dms/faultScheme/Create",updateItem:"/api/dms/faultScheme/update",deleteItem:"/api/dms/faultScheme/delete",getphenomenonById:"/api/dms/faultSymptom/get",phenomenonDetailById:"/api/dms/faultSymptom/getById",getReasonList:"/api/dms/faultReason/get",updatePhenomenon:"/api/dms/faultSymptom/update",deletePhenomenon:"/api/dms/faultSymptom/delete",createPhenomenon:"/api/dms/faultSymptom/create",createReason:"/api/dms/faultReason/create",deleteReason:"/api/dms/faultReason/delete",updateReason:"/api/dms/faultReason/update"};function o(e){return Object(a["a"])({url:n.getList,method:"get",params:e})}function s(e){return Object(a["a"])({url:n.createItem,method:"post",data:e})}function r(e){return Object(a["a"])({url:n.updateItem,method:"post",data:e})}function l(e){return Object(a["a"])({url:n.deleteItem,method:"post",data:{id:e}})}function c(e){return Object(a["a"])({url:n.getphenomenonById,method:"get",params:e})}function d(e){return Object(a["a"])({url:n.phenomenonDetailById,method:"get",params:{id:e}})}function p(e){return Object(a["a"])({url:n.createPhenomenon,method:"post",data:e})}function u(e){return Object(a["a"])({url:n.updatePhenomenon,method:"post",data:e})}function m(e){return Object(a["a"])({url:n.deletePhenomenon,method:"post",data:{id:e}})}function f(e){return Object(a["a"])({url:n.getReasonList,method:"get",params:e})}function h(e){return Object(a["a"])({url:n.createReason,method:"post",data:e})}function y(e){return Object(a["a"])({url:n.updateReason,method:"post",data:e})}function g(e){return Object(a["a"])({url:n.deleteReason,method:"post",data:{id:e}})}},"708e":function(e,t,i){},a645:function(e,t,i){"use strict";var a=i("12a9"),n=i.n(a);n.a},ad16:function(e,t,i){"use strict";var a=i("221e"),n=i.n(a);n.a},b55a:function(e,t,i){"use strict";var a=i("5e63"),n=i.n(a);n.a},b9cf:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.$route.params.groupId?e._e():a("Search",{attrs:{"show-btn":e.buttonPermissions("300020101"),onsubmit:"return false"},on:{search:e.searchInit,changeKeyword:e.changeKeyword}},[e.buttonPermissions("300020102")&&!e.$route.params.groupId?a("el-button",{attrs:{type:"warning",plain:"",size:"small",icon:"el-icon-plus"},on:{click:e.insert}},[e._v(e._s(e.$t("list.created")))]):e._e()],1),a("el-card",[e.$route.params.groupId?a("div",{staticStyle:{display:"flex","justify-content":"center"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"26px","font-weight":"700"}},[e._v(e._s(e.cardTitle))])]):e._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{data:e.tableData,border:""}},[a("template",{slot:"empty"},[a("div",{staticClass:"empty"},[a("img",{attrs:{src:i("a431")}}),a("p",[e._v("暂无数据")])])]),a("el-table-column",{attrs:{label:e.$t("list.number"),align:"center",prop:"code"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.buttonPermissions("300020107")?a("router-link",{attrs:{to:e.listStr+t.row.id}},[a("el-link",[e._v(e._s(t.row.code))])],1):a("span",[e._v("\n            "+e._s(t.row.code)+"\n          ")])]}}])}),a("el-table-column",{attrs:{label:e.$t("list.name"),align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:e.$t("list.type"),align:"center",prop:"typeName"}}),e.buttonPermissions("300020123")||e.buttonPermissions("10000300020123")?a("el-table-column",{attrs:{label:"设备参数",prop:e.fixProperties},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.properties,(function(t,i){return a("div",{key:t.id},[i%2==0?a("span",{staticStyle:{float:"left",width:"49%"}},[a("span",[a("span",[e._v(e._s(t.propertyName))]),a("strong",[e._v(" :")])]),a("span",[e._v(e._s(t.propertyValue))])]):e._e(),i%2!==0?a("span",{},[a("span",[a("span",[e._v(e._s(t.propertyName))]),a("strong",[e._v(" :")])]),a("span",[e._v(e._s(t.propertyValue))])]):e._e()])}))}}],null,!1,1114695683)}):e._e(),e.buttonPermissions("300020119")||e.buttonPermissions("10000300020119")?a("el-table-column",{attrs:{label:e.$t("list.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"opeart"},[e.buttonPermissions("300020105")?a("router-link",{staticClass:"funcKey",attrs:{to:{path:e.str,query:{deviceId:t.row.id}}}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[a("i",{staticClass:"el-icon-setting"}),e._v("\n                故障分析\n              ")])],1):e._e(),e.buttonPermissions("300020112")||e.buttonPermissions("10000300020112")?a("router-link",{staticClass:"funcKey",attrs:{to:{path:e.addStr,query:{deviceId:t.row.id}}}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[a("i",{staticClass:"el-icon-folder-add"}),e._v("\n                附加功能\n              ")])],1):e._e(),e.buttonPermissions("300020113")||e.buttonPermissions("10000300020113")?a("router-link",{staticClass:"funcKey",attrs:{to:{path:e.partStr,query:{id:t.row.id,code:t.row.code}}}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[a("i",{staticClass:"iconfont",staticStyle:{color:"#1890ff"}},[e._v("")]),e._v("\n                设备部件\n              ")])],1):e._e(),e.buttonPermissions("300020116")||e.buttonPermissions("10000300020116")?a("router-link",{staticClass:"funcKey",attrs:{to:{path:e.positionStr,query:{id:t.row.id}}}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[a("i",{staticClass:"iconfont",staticStyle:{color:"#1890ff"}},[e._v("")]),e._v("\n                设备部位\n              ")])],1):e._e(),e.buttonPermissions("300020121")||e.buttonPermissions("10000300020117")?a("router-link",{staticClass:"funcKey",attrs:{to:{path:e.addDeviceStr,query:{id:t.row.id,code:t.row.code}}}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[a("i",{staticClass:"iconfont",staticStyle:{color:"#1890ff"}},[e._v("")]),e._v("\n                引用指标模板批量添加设备指标\n              ")])],1):e._e(),e.buttonPermissions("300020117")?a("router-link",{staticClass:"funcKey",attrs:{to:{path:e.monitorStr,query:{id:t.row.id,name:t.row.name}}}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[a("i",{staticClass:"el-icon-video-camera",staticStyle:{color:"#1890ff"}}),e._v("\n                监控\n              ")])],1):e._e(),e.buttonPermissions("10000300020121")||e.buttonPermissions("300020122")?a("router-link",{staticClass:"funcKey",attrs:{to:{path:e.performanceStr,query:{id:t.row.id,name:t.row.name}}}},[a("el-link",{attrs:{underline:!1,type:"primary"}},[a("i",{staticClass:"el-icon-data-line",staticStyle:{color:"#1890ff"}}),e._v("\n                特征曲线\n              ")])],1):e._e(),e.buttonPermissions("300020118")||e.buttonPermissions("10000300020118")?a("el-button",{staticClass:"funcKey",attrs:{type:"text",icon:"el-icon-reading"},on:{click:function(i){return e.bindView(t.row)}}},[e._v("绑定视图")]):e._e(),e.buttonPermissions("300020103")?a("el-button",{staticClass:"funcKey",attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(i){return e.edit(t.row.id)}}},[e._v(e._s(e.$t("list.edit")))]):e._e(),e.buttonPermissions("300020108")?a("el-button",{staticClass:"funcKey",attrs:{type:"text"},on:{rightHidden:e.rightHidden,click:function(i){return e.handleClickRight(t.row.id)}}},[e._v("责任员工")]):e._e(),e.buttonPermissions("300020104")?a("el-button",{staticClass:"funcKey",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.del(t.row.id)}}},[e._v(e._s(e.$t("list.delete")))]):e._e()],1)]}}],null,!1,752784303)}):e._e()],2)],1),a("div",{staticClass:"paginationContainer"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[5,20,30,40,50],"page-size":e.pageSize,total:e.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.detailShow?a("Detail",{ref:"detail",on:{reload:e.editHidden}}):e._e(),e.rightShow?a("RightEmployee",{ref:"rightDialog"}):e._e(),e.viewShow?a("BindView",{ref:"bindView"}):e._e()],1)},n=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:"责任员工"},on:{"update:visible":function(t){e.visible=t},close:e.onClose}},[i("div",{staticClass:"sonDevide"},[i("strong",[e._v(e._s(e.$t("list.details.responsibleEmployees")))]),i("div",{staticClass:"components-container board",staticStyle:{"margin-top":"5px"}},[i("Kanban",{key:1,ref:"kanChild",staticClass:"kanban todo",attrs:{list:e.options,group:e.group},on:{optionsChange:e.optionsChange}})],1),i("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"success",size:"mini",plain:""},on:{click:e.addEmply}},[e._v(e._s(e.$t("list.details.add")))])],1),i("el-button",{on:{click:e.handleSubmit}},[e._v("\n    确定\n  ")]),e.emplyShow?i("emply",{ref:"emplyDetail",on:{staff:e.staff,hidden:e.staffhidden}}):e._e()],1)},s=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("55dd"),i("bd86")),l=(i("7f7f"),i("11e6")),c=i("aeec"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.emplyvisible,"close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1,title:e.$t("list.emply.employees")},on:{"update:visible":function(t){e.emplyvisible=t},close:e.onemplyClose}},[a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,height:"500",border:""},on:{select:e.handleChoose,"select-all":e.handleChooseAll}},[a("template",{slot:"empty"},[a("div",{staticClass:"empty"},[a("img",{attrs:{src:i("a431")}}),a("p",[e._v("暂无数据")])])]),a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{label:e.$t("list.emply.name"),align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:e.$t("list.emply.gender"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.sex?a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("list.emply.female")))]):a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e.$t("list.emply.male")))])]}}])}),a("el-table-column",{attrs:{label:e.$t("list.emply.phone"),align:"center",prop:"mobile"}})],2),a("div",{staticClass:"paginationContainer"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[5,20,30,40,50],"page-size":e.pageSize,total:e.totalCount,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.emplyvisible=!1}}},[e._v(e._s(e.$t("cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.chooseChild}},[e._v(e._s(e.$t("ok")))])],1)],1)},p=[],u=(i("20d6"),i("6762"),i("2fdb"),i("c59c")),m={name:"Emply",data:function(){return{emplyvisible:!1,tableData:[],pageIndex:1,pageSize:10,totalCount:30,chooseArray:[]}},created:function(){var e=this,t=this.$parent.$parent.options.map((function(t){for(var i=0;i<e.tableData.length;i++)if(e.tableData[i].id===t.id){t=e.tableData[i];break}return t}));this.chooseArray=t},methods:{handleChooseAll:function(e){var t=this,i=this.chooseArray.map((function(e){return e.id}));if(e.length>0){var a=e.filter((function(e){return!i.includes(e.id)}));this.chooseArray=this.chooseArray.concat(a)}else this.chooseArray=this.chooseArray.filter((function(e){return!t.tableData.map((function(e){return e.id})).includes(e.id)}))},handleChoose:function(e,t){var i=e.some((function(e){return e.id===t.id}));if(i){var a=this.chooseArray.some((function(e){return e.id===t.id}));a||this.chooseArray.push(t)}else{var n=this.chooseArray.findIndex((function(e){return e.id===t.id}));this.chooseArray.splice(n,1)}},onemplyClose:function(){this.$emit("hidden")},handleCurrentChange:function(e){this.pageIndex=e,this.init()},toggleSelection:function(e){var t=this,i=this.tableData.filter((function(t){return e.map((function(e){return e.id})).includes(t.id)}));i.forEach((function(e){t.$nextTick((function(){t.$refs.multipleTable.toggleRowSelection(e,!0)}))}))},init:function(){var e=this;this.emplyvisible=!0,Object(u["e"])({pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(t){e.$set(e,"tableData",t.data.items),e.totalCount=t.data.totalCount,e.pageIndex=t.data.pageIndex,e.pageSize=t.data.pageSize,e.toggleSelection(e.chooseArray)}))},chooseChild:function(){this.$emit("staff",this.chooseArray),this.emplyvisible=!1}}},f=m,h=(i("0b9f"),i("2877")),y=Object(h["a"])(f,d,p,!1,null,"32058877",null),g=y.exports;function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(i,!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var S={components:{Kanban:c["a"],emply:g},data:function(){return{emplyShow:!1,visible:!1,options:[],group:"mission",jsonData:{},oldemployees:[]}},methods:{staffhidden:function(){this.emplyShow=!1},handleSubmit:function(){var e=this,t=this.options.map((function(e,t){return{employeeId:e.id,employeeName:e.name,sort:t}})),i=b({},this.jsonData,{employees:t,oldemployees:this.oldemployees});Object(l["i"])(i).then((function(){e.$message({type:"success",message:"修改成功",duration:500,onClose:function(){e.visible=!1,e.$parent.init()}})}))},init:function(e){var t=this;this.visible=!0,Object(l["n"])(e).then((function(e){var i=e.data.employees.map((function(e){return{name:e.employeeName,id:e.employeeId,sort:e.sort}}));t.$set(t,"options",i),t.$set(t,"jsonData",e.data),t.$set(t,"oldemployees",JSON.parse(JSON.stringify(i)))}))},onClose:function(){},optionsChange:function(){},addEmply:function(){var e=this;this.emplyShow=!0,this.$nextTick((function(){e.$refs.emplyDetail.init()}))},staff:function(e){this.options=e.map((function(e){return{name:e.name,id:e.id,sort:e.sort}}))}}},w=S,C=Object(h["a"])(w,o,s,!1,null,"bb27188a",null),$=C.exports,k=i("1427"),x=i("db0e"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,"close-on-click-modal":!1,title:"insert"===e.type?this.$t("list.details.created"):this.$t("list.details.modify"),width:"55%"},on:{"update:visible":function(t){e.visible=t},close:e.onClose}},[a("div",{staticClass:"el-dialog-div"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:this.$t("list.details.baseInfomation.basicInformation"),name:"first"}},[a("el-form",{ref:"form",attrs:{data:e.form,model:e.form,rules:e.rules,"label-position":"top","label-width":"80px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{offset:1,span:9}},[a("el-form-item",{attrs:{label:this.$t("list.details.baseInfomation.number"),prop:"code"}},[e.buttonPermissions("300020114")||e.buttonPermissions("10000300020114")?a("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}):a("el-input",{attrs:{disabled:!0},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),a("el-col",{attrs:{offset:1,span:9}},[a("el-form-item",{attrs:{label:this.$t("list.details.baseInfomation.name"),prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{offset:1,span:9}},[a("el-form-item",{attrs:{label:this.$t("list.details.baseInfomation.typeDevice"),prop:"typeId"}},[e.buttonPermissions("300020115")||e.buttonPermissions("10000300020115")?a("el-select",{attrs:{placeholder:this.$t("list.details.baseInfomation.pleaseSelect"),filterable:""},on:{change:e.search},model:{value:e.form.typeId,callback:function(t){e.$set(e.form,"typeId",t)},expression:"form.typeId"}},e._l(e.optionsType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._l(e.optionsType,(function(t){return a("div",{key:t.id},[t.id===e.form.typeId?a("el-input",{attrs:{disabled:!0},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"item.name"}}):e._e()],1)}))],2)],1),a("el-col",{attrs:{offset:1,span:9}},[a("el-form-item",{attrs:{label:this.$t("list.details.baseInfomation.dateProduction"),prop:"productDate"}},[a("el-date-picker",{attrs:{placeholder:this.$t("list.details.baseInfomation.PleaseProduction"),type:"date"},model:{value:e.form.productDate,callback:function(t){e.$set(e.form,"productDate",t)},expression:"form.productDate"}})],1)],1)],1),a("br"),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{offset:1}},[a("Position",{ref:"position",attrs:{formAddress:e.form.address},on:{setPosition:e.setPosition}})],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{offset:1,span:9}},[a("el-form-item",{attrs:{label:this.$t("list.details.baseInfomation.activationDate"),prop:"activeDate"}},[a("el-date-picker",{attrs:{placeholder:this.$t("list.details.baseInfomation.PleaseActivation"),type:"date"},model:{value:e.form.activeDate,callback:function(t){e.$set(e.form,"activeDate",t)},expression:"form.activeDate"}})],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{offset:1,span:20}},[a("el-form-item",{attrs:{label:this.$t("list.details.baseInfomation.remark"),prop:"remark"}},[a("el-input",{attrs:{rows:2,placeholder:this.$t("list.details.baseInfomation.enterContent"),type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),a("hr",{staticStyle:{border:"0.3px solid #dcdfe6"}}),a("h3",{staticStyle:{"margin-left":"2vw"}},[e._v("固定属性: ( 勾选为显示 )")]),a("FixAttr",{attrs:{propertiesName:e.propertiesName,properties:e.form.properties}})],1),a("el-tab-pane",{attrs:{name:"six",label:"扩展属性"}},[a("AddAttr",{ref:"extendVal",attrs:{"extend-properties":e.form.extendProperties}})],1),a("el-tab-pane",{attrs:{label:e.$t("list.details.sonDevide.sonDevices"),name:"second"}},[a("div",{staticClass:"sonDevide"},[a("strong",[e._v(e._s(e.$t("list.details.sonDevide.sonDevices")))]),a("br"),a("el-table",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.form.childrenDevices,border:""}},[a("template",{slot:"empty"},[a("div",{staticClass:"empty"},[a("img",{attrs:{src:i("a431")}}),a("p",[e._v("暂无数据")])])]),a("el-table-column",{attrs:{label:e.$t("list.details.sonDevide.deviceNo"),prop:"deviceCode"}}),a("el-table-column",{attrs:{label:e.$t("list.details.sonDevide.deviceName"),prop:"deviceName"}}),a("el-table-column",{attrs:{label:e.$t("list.details.sonDevide.associationCode")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.edit?[a("el-input",{model:{value:i.code,callback:function(t){e.$set(i,"code",t)},expression:"row.code"}})]:a("span",[e._v(e._s(i.code))])]}}])}),a("el-table-column",{attrs:{label:e.$t("list.details.sonDevide.operation")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteRow(i,e.form.childrenDevices)}}},[e._v(e._s(e.$t("list.details.sonDevide.remove")))]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.modify(i)}}},[e._v(e._s(i.edit?e.$t("list.details.sonDevide.saveAssociation"):e.$t("list.details.sonDevide.modifyAssociation")))])]}}])})],2),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"success",size:"mini",plain:""},on:{click:e.addChild}},[e._v(e._s(e.$t("list.details.sonDevide.add")))])],1)]),a("el-tab-pane",{attrs:{label:e.$t("list.details.responsibleEmployees"),name:"third"}},[a("div",{staticClass:"sonDevide"},[a("strong",[e._v(e._s(e.$t("list.details.responsibleEmployees")))]),a("div",{staticClass:"components-container board",staticStyle:{"margin-top":"5px"}},[a("Kanban",{key:1,ref:"kanChild",staticClass:"kanban todo",attrs:{list:e.options,group:e.group},on:{optionsChange:e.optionsChange}})],1),a("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"success",size:"mini",plain:""},on:{click:e.addEmply}},[e._v(e._s(e.$t("list.details.add")))])],1)]),"insert"===e.type?a("el-tab-pane",{attrs:{label:"故障模版",name:"five"}},[a("div",{staticClass:"sonDevide",staticStyle:{padding:"20px"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.form.faultSchemeId,callback:function(t){e.$set(e.form,"faultSchemeId",t)},expression:"form.faultSchemeId"}},e._l(e.errAnaly,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(e._s(e.$t("ok")))])],1),e.childShow?a("child",{ref:"childDetail",attrs:{"checked-data":e.form.childrenDevices},on:{childDe:e.childDe,hidden:e.childHidden}}):e._e(),e.emplyShow?a("emply",{ref:"emplyDetail",on:{staff:e.staff,hidden:e.staffHidden}}):e._e()],1)},D=[],I=i("75fc"),P=i("024c"),A=i.n(P),O=i("65da"),j=i("2e24"),E=i("579c"),N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm}},[e._l(e.dynamicValidateForm.domains,(function(t,a){return i("el-row",{key:a},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{prop:"domains."+a+".propertyName",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入属性名称"},model:{value:t.propertyName,callback:function(i){e.$set(t,"propertyName",i)},expression:"domain.propertyName"}})],1)],1),i("el-col",{staticClass:"line",staticStyle:{margin:"0 5px","text-align":"center","line-height":"32px"},attrs:{span:1}},[i("strong",[e._v(" : ")])]),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{prop:"domains."+a+".propertyValue",rules:{required:!0,message:"请输入内容",trigger:"blur"}}},[i("el-input",{staticStyle:{margin:"0 5px",width:"100%"},attrs:{placeholder:"请输入内容"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"domain.propertyValue"}})],1)],1),i("el-button",{staticStyle:{"margin-left":"15px"},on:{click:function(i){return i.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)})),i("el-form-item",[i("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-circle-plus"},on:{click:e.addDomain}},[e._v("新增")])],1)],2)],1)},z=[],V={name:"AddAttr",props:["extendProperties"],data:function(){return{dynamicValidateForm:{domains:[{propertyName:"行业",propertyValue:"传统行业"}]},rules:{propertyName:[{required:!0,message:"请输入属性名称",trigger:"blur"}],propertyValue:[{required:!0,message:"请输入内容",trigger:"blur"}]},extendValue:[]}},methods:{init:function(){var e=this;this.$nextTick((function(){e.dynamicValidateForm.domains=e.extendProperties}))},submitForm:function(e,t){var i=this;return this.extendValue=e,new Promise((function(a,n){i.$refs[t].validate((function(t){t?a(e):n("error submit!!")}))}))},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},addDomain:function(){this.dynamicValidateForm.domains.push({})}}},T=V,M=(i("b55a"),Object(h["a"])(T,N,z,!1,null,"14edb2ea",null)),q=M.exports,R=i("4624"),B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{ref:"fixDynamic",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm}},[i("el-row",{attrs:{gutter:24}},e._l(e.propertiesName,(function(t,a){return i("div",{key:a},[i("el-col",{attrs:{offset:1,span:9}},a%2==0?[i("el-form-item",{attrs:{label:t.propertyName}},[i("el-input",{staticStyle:{width:"90%","margin-right":"2%"},attrs:{placeholder:"请输入内容"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"domain.propertyValue"}}),i("el-checkbox",{model:{value:t.isShow,callback:function(i){e.$set(t,"isShow",i)},expression:"domain.isShow"}})],1)]:[i("el-form-item",{attrs:{prop:t.propertyValue,label:t.propertyName}},[i("el-input",{staticStyle:{width:"90%","margin-right":"2%"},attrs:{placeholder:"请输入内容"},model:{value:t.propertyValue,callback:function(i){e.$set(t,"propertyValue",i)},expression:"domain.propertyValue"}}),i("el-checkbox",{model:{value:t.isShow,callback:function(i){e.$set(t,"isShow",i)},expression:"domain.isShow"}})],1)],1)],1)})),0)],1)},F=[],K={name:"FixAttr",props:["properties","propertiesName"],computed:{dynamicValidateForm:function(){return{dynamicValidateForm:this.domains}}},data:function(){return{domains:[{propertyName:"行业",propertyValue:"传统行业"}]}},watch:{properties:function(e){this.init(e)}},mounted:function(){},methods:{init:function(){for(var e in this.properties)for(var t in 0==this.properties[e].isShow?this.properties[e].isShow=!1:1==this.properties[e].isShow&&(this.properties[e].isShow=!0),this.propertiesName)this.propertiesName[t].propertyName==this.properties[e].propertyName&&(this.propertiesName[t]=this.properties[e])}}},G=K,L=Object(h["a"])(G,B,F,!1,null,"31d7e0d6",null),H=L.exports;function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function J(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(i,!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Q={components:{child:j["a"],emply:g,Kanban:c["a"],Position:E["a"],AddAttr:q,FixAttr:H},mixins:[R["a"]],data:function(){return{map:null,activeName:"first",group:"mission",list1:[],options:[],visible:!1,type:"insert",childShow:!1,emplyShow:!1,lng:"",lat:"",form:{childrenDevices:[],tags:[],parts:[],extendProperties:[],properties:[],address:""},optionsType:[],errAnaly:[],rules:{code:[{required:!0,message:this.$t("list.details.baseInfomation.rules.number"),trigger:"blur"}],name:[{required:!0,message:this.$t("list.details.baseInfomation.rules.name"),trigger:"blur"}],typeId:[{required:!0,message:this.$t("list.details.baseInfomation.rules.type"),trigger:"blur"}],productDate:[{required:!0,message:this.$t("list.details.baseInfomation.rules.productDate"),trigger:"blur"}],activeDate:[{required:!0,message:this.$t("list.details.baseInfomation.rules.activeDate"),trigger:"blur"}],remark:[{required:!0,message:this.$t("list.details.baseInfomation.rules.remark"),trigger:"blur"}]},employees:[],employeesID:[],oldemployees:[],typeName:"",propertiesName:[]}},mounted:function(){var e=this;Object(l["q"])({keyword:this.keyword,pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(t){e.optionsType=t.data.items})),Object(O["f"])({pageIndex:1,pageSize:200}).then((function(t){e.errAnaly=t.data.items}))},methods:{search:function(){this.deviceAttr()},deviceAttr:function(){var e=this,t=JSON.parse(this.$store.state.user.config.DevicePropertyList);t.map((function(t){t.id===e.form.typeId&&(e.propertiesName=t.properties)}))},childHidden:function(){this.childShow=!1},staffHidden:function(){this.emplyShow=!1},setPosition:function(e){this.form.lng=e.lng,this.form.lat=e.lat},optionsChange:function(e){this.options=e},modify:function(e){e.edit?this.$set(e,"edit",!1):this.$set(e,"edit",!0)},handleClick:function(){},init:function(e){var t=this;this.type=null==e?"insert":"edit",this.visible=!0,e&&Object(l["n"])(e).then((function(e){t.form.tags=e.data.tags,t.form.parts=e.data.parts,t.form.extendProperties=e.data.extendProperties,t.form.properties=e.data.properties,t.form.address=t.$refs.position.valuePosition,t.$refs.extendVal.init();var i="";e.data&&e.data.productDate&&(i=t.$moment.utc(e.data.productDate).local().format());var a="";e.data&&e.data.activeDate&&(a=t.$moment.utc(e.data.activeDate).local().format()),t.form=J({},e.data,{activeDate:a,productDate:i});for(var n=0;n<t.form.employees.length;n++)t.options.push({name:t.form.employees[n].employeeName,id:t.form.employees[n].employeeId});var o=t.options.map((function(e,t){return{employeeName:e.name,employeeId:e.id,sort:t}}));t.oldemployees=JSON.parse(JSON.stringify(o)),t.$refs.position.positionMthods(t.form.address),t.deviceAttr()}))},onClose:function(){this.map&&this.map.destroy(),this.$parent.detailShow=!1,this.init(),this.form={},this.$refs.position.valuePosition="",this.activeName="first"},addChild:function(){var e=this;this.childShow=!0,this.$nextTick((function(){e.$refs.childDetail.init()}))},addEmply:function(){var e=this;this.emplyShow=!0,this.$nextTick((function(){e.$refs.emplyDetail.init()}))},cancel:function(){this.visible=!1},onSubmit:function(e){var t=this;this.form.properties=this.propertiesName;var i=this.$refs.extendVal.dynamicValidateForm.domains,a={},n=i.reduce((function(e,t){return!a[t.propertyName]&&(a[t.propertyName]=e.push(t)),e}),[]);n.length!==i.length?this.$message("请不要添加相同的属性"):this.$refs.extendVal.submitForm(i,"dynamicValidateForm").then((function(){void 0!==t.$refs.tagTable?t.form.tags=t.$refs.tagTable.tagList:t.form.tags=[];var i=!0;void 0===t.form.childrenDevices&&(t.form.childrenDevices=[]),0!==t.form.childrenDevices.length&&t.form.childrenDevices.map((function(e,a){if(!t.form.childrenDevices[a].code||""===t.form.childrenDevices[a].code)return t.$message({type:"warning",message:t.$t("list.enterAssociationCode"),duration:500}),i=!1,i})),!0===i&&A.a.plugin("AMap.Geocoder",(function(){var i=new A.a.Geocoder({});i.getLocation(t.$refs.position.valuePosition.trim(),(function(i,a){"complete"===i?(t.form.lng=a.geocodes[0].location.lng,t.form.lat=a.geocodes[0].location.lat,t.form.province=a.geocodes[0].addressComponent.province,t.form.city=a.geocodes[0].addressComponent.city,t.form.address=t.$refs.position.valuePosition,t.$refs[e].validate((function(e){if(e&&t.form.lng){var i=t.options.map((function(e,t){return{employeeId:e.id,employeeName:e.name,sort:t}}));t.form.properties.map((function(e){1==e.isShow?e.isShow=1:0==e.isShow&&(e.isShow=0)})),"edit"===t.type?Object(l["i"])(J({},t.form,{employees:i,oldemployees:t.oldemployees})).then((function(){t.$message({type:"success",message:"修改成功",duration:500,onClose:function(){t.$parent.init(),t.cancel()}})})):"insert"===t.type&&Object(l["j"])(J({},t.form,{employees:i})).then((function(){t.$message({type:"success",message:"新增成功",duration:500,onClose:function(){t.onClose(),t.$parent.init()}})}))}}))):t.$message({type:"error",message:"未知的地理信息"})}))}))})).catch((function(){}))},staff:function(e){this.options=e.map((function(e){return{name:e.name,id:e.id}}))},childDe:function(e){var t=e.map((function(e){return void 0===e.deviceCode?{deviceCode:e.code,deviceName:e.name,deviceId:e.id,code:e.glCode}:e}));this.$set(this.form,"childrenDevices",Object(I["a"])(t)),this.childShow=!1},deleteRow:function(e,t){t.map((function(i,a){e.deviceId===i.deviceId&&t.splice(a,1)}))}}},W=Q,X=(i("da4a"),Object(h["a"])(W,_,D,!1,null,"4dcdc6d1",null)),Y=X.exports,Z=i("5119"),ee={name:"List",components:{Search:k["a"],Detail:Y,RightEmployee:$,BindView:Z["a"]},mixins:[R["d"],R["a"]],data:function(){return{loading:!1,rightShow:!1,tableData:[],detailShow:!1,cardTitle:"",str:"",listStr:"",addStr:"",partStr:"",positionStr:"",monitorStr:"",viewShow:!1,addDeviceStr:"",fixProperties:"123"}},mounted:function(){this.init(),this.$store.state.user.config.isPro?(this.str="/ExpertSystem/FaultManagement/analysisDetail1",this.listStr="/ExpertSystem/EquipmentManagement/status/",this.addStr="/ExpertSystem/EquipmentManagement/add",this.partStr="/ExpertSystem/EquipmentManagement/partDevice",this.positionStr="/ExpertSystem/EquipmentManagement/location",this.monitorStr="/ExpertSystem/EquipmentManagement/monitor",this.addDeviceStr="/ExpertSystem/EquipmentManagement/addPartsFromTemplate",this.performanceStr="/ExpertSystem/EquipmentManagement/performance"):(this.str="/FaultManagement/analysisDetail1",this.listStr="/EquipmentManagement/status/",this.addStr="/EquipmentManagement/add",this.partStr="/EquipmentManagement/partDevice",this.positionStr="/EquipmentManagement/location",this.monitorStr="/EquipmentManagement/monitor",this.addDeviceStr="/EquipmentManagement/addPartsFromTemplate",this.performanceStr="/EquipmentManagement/performance")},methods:{menuPermissions:function(e){return this.$store.state.user.userInfo.menus.some((function(t){return t.code===e}))},rightHidden:function(){this.rightShow=!1},handleClickRight:function(e){var t=this;this.rightShow=!0,this.$nextTick((function(){t.$refs.rightDialog.init(e)}))},changeKeyword:function(e){this.keyword=e},searchInit:function(){this.pageIndex=1,this.init()},init:function(){var e=this;this.loading=!0,this.$route.params.groupId?(Object(x["a"])({groupId:this.$route.params.groupId,pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(t){e.loading=!1,e.$set(e,"tableData",t.data.items),e.totalCount=t.data.totalCount,e.pageIndex=t.data.pageIndex,e.pageSize=t.data.pageSize})),Object(x["c"])(this.$route.params.groupId).then((function(t){e.cardTitle=t.data.groupName}))):Object(l["o"])({keyword:this.keyword,pageIndex:this.pageIndex,pageSize:this.pageSize}).then((function(t){e.loading=!1,e.$set(e,"tableData",t.data.items),e.totalCount=t.data.totalCount,e.pageIndex=t.data.pageIndex,e.pageSize=t.data.pageSize}))},insert:function(){var e=this;this.detailShow=!0,this.$nextTick((function(){e.$refs.detail.init()}))},editHidden:function(){this.detailShow=!1,this.init()},edit:function(e){var t=this;this.detailShow=!0,this.$nextTick((function(){t.$refs.detail.init(e)}))},del:function(e){var t=this;this.$confirm(this.$t("list.deleteDevice"),this.$t("tips"),{confirmButtonText:this.$t("ok"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((function(){Object(l["l"])(e).then((function(){t.$message({type:"success",message:t.$t("rules.successfulDeletion"),duration:500,onClose:function(){t.pageIndex=1,t.init()}})}))})).catch((function(){t.$message({type:"info",message:t.$t("rules.canceledDeletion")})}))},bindView:function(e){var t=this;this.viewShow=!0,this.$nextTick((function(){t.$refs.bindView.init(e)}))}}},te=ee,ie=(i("5922"),Object(h["a"])(te,a,n,!1,null,"77163d57",null));t["default"]=ie.exports},c59c:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"h",(function(){return r})),i.d(t,"b",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"e",(function(){return d})),i.d(t,"d",(function(){return p})),i.d(t,"g",(function(){return u}));var a=i("b775"),n={GetById:"/api/Company/Employee/GetById",Create:"/api/Company/Employee/create",UpdateInfo:"/api/company/Employee/UpdateInfo",GetEmployeesByName:"/api/Company/Employee/GetEmployeesByName",DeleteEmployee:"/api/Company/Employee/delete",GetEmployeesBellowRoleLevel:"/api/company/employee/GetEmployeesBellowRoleLevel",UploadEmployee:"/api/company/Employee/UploadEmployee",GetDevicesByEmpId:"/api/dms/Device/GetDevicesByEmpId",UpdateByDeviceRefEmploee:"/api/dms/Device/UpdateByDeviceRefEmploee"};function o(e){return Object(a["a"])({url:n.GetById,method:"get",headers:{"Content-Type":"application/json"},params:{id:e}})}function s(e){return Object(a["a"])({url:n.Create,method:"post",headers:{"Content-Type":"application/json"},data:e})}function r(e){return Object(a["a"])({url:n.UpdateInfo,method:"post",headers:{"Content-Type":"application/json"},data:e})}function l(e){return Object(a["a"])({url:n.DeleteEmployee,method:"post",headers:{"Content-Type":"application/json"},data:{id:e}})}function c(e){return Object(a["a"])({url:n.GetEmployeesByName,method:"get",headers:{"Content-Type":"application/json"},params:e})}function d(e){return Object(a["a"])({url:n.GetEmployeesBellowRoleLevel,method:"get",headers:{"Content-Type":"application/json"},params:e})}function p(e){return Object(a["a"])({url:n.GetDevicesByEmpId,method:"get",params:e})}function u(e){return Object(a["a"])({url:n.UpdateByDeviceRefEmploee,method:"post",headers:{"Content-Type":"application/json"},data:e})}},ce91:function(e,t,i){"use strict";var a=i("6083"),n=i.n(a);n.a},da4a:function(e,t,i){"use strict";var a=i("1dfe"),n=i.n(a);n.a},f97a:function(e,t,i){}}]);
//# sourceMappingURL=chunk-7426fc89.f0cae158.js.map